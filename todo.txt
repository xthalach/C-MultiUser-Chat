

//Server
# ✅ Quant un client tanca la sessio mentre el server envia dades es tanca el server fent que tots els clients perdin conexio. ✅  Solucio: MSG_NOSIGNAL
# Configurar que els usuaris puguin parla amb altres usuaris
# 🔴Crear la part de la base de dades on es guarden totes les propietats de tots els usuaris .🔴
    # Aquesta base de dades tambe ha de tenir un HEADER per saber que es tracta de una base de dades legitima. 
# Reset the nfds variable to reuse the log off file descriptors from clients. This could make that another user gets a used file descriptor
# Posar tots els missatges hardcodejats al common file. 
# Crear logs del servidor, anotar tots els errors que pasen que no han tirat el server sig, autenticacions fallides tambe, 
# Brute Force attempts
# Funcio per imprimir tots els usuaris conectats online 
# Fer que els usuaris siguin dinamics, amb realloc, 

// Client 
# Que el client es pugue quedar en espera asta que el servidor estigue disponible
# Funcio per a registrar-te si no tens usuari
# Definir el menu i el protocol de com funcionara el menu 
# R
# Funcionalitat per surtir del programa (exit)
# Fer una cache amb els chats dels usuaris que t'estant parlant mentres estas amb una conversa. Fer que el server envie una copia de la estructura 
del usuari, i comprobar cada vegada que arriben dades el file descriptor i en cas de que el FD sigui de una persona que no es la que parlem, es guarda
a una cache que despres l'usuari podra consultar. 

// General 

🔴Funcio per encriptar les contrasenyes y el usuaris de la base de dades. 
Un usuari administrador per gestionar el serivor. 
Hacer como un visual en el terminal para saber con quien estas hablando y quien te ha hanlado iluminando con luz o marcarlo con un simbolo. 
Crear un minijoc per als usuaris quant no hi ha ningu conectat - 
Temporitzador  - avis de que el servidor estacara en 30segons. 
S'ha de lliberar la memoria de la structura users al tancar el servidor. 
Fer un sistema de seguretat per crear backups desde un altre proceses fet copies constants de la memoria del programa principal. 

- ago 26 2025 / 17:42
Es cambia el file descriptor cada vegada que t'autentiques aixo pot portar problemes, el file descriptor ha de ser static una vegada el usuari s'autentica. 

Si no existeix la BBDD es crea nova. 

Gestiona les tancades inesperades del client, com ara que tanqui el programa mentre es registra, s'ha de tractar i deixar l'strucutra del client netejada com si no esa fet res, s'ha de fer aixi amb la resta de estats que hi ha al programa.  

*** Restructura els arxius del programa, al arxiu database.c hi ha funcions com la de loign i register que crec que no tindrien que estar-hi, ja que es poden colocar al arxiu functions.c, dabase.c = parse.c ???? *** 

- sep 2 18:04 

Una vegada es falla l'autenticacio es torna al menu inicial. 

- sep 6 21:40 


Si el client/usuari, tanca sesio a mintan registre s'ha de wipejar el usuari que ha alterat. \

El arxiu functions.c es una mica ambiguo ja que les funcions son un pupurri. 

Es poden crear usuaris amb el mateix nom i contrasenya, es poden diferencia per el id, pero igual el nom tindria que ser unic tambe {
    a l'hora de fer el registre s'ha de validar si el usuari ja existeix, i per evitar la enumeracio masiva de usuaris es fa una funcio
    per limitar els intents de registre a 5, despres de 5 intents es tira fora al client. 
}

falta debug a la funcio de listOnlineUsers no funciona correctament. 

- sep 13 10:56 

El problema de que hi ha dos prompts es de que: 

    Protocol Issue: The server is sending an extra packet with only null bytes, possibly caused by always sending buffers of fixed size (1024) and not trimming to only valid data.









╔═══════════════════════════════════════════════════════════════════════════╗
║ 🔔 carlos te mencionó en grupo_trabajo | 2 mensajes perdidos             ║
╠═══════════════╤═══════════════════════╤═══════════════════════════════════╣
║ GENTE ONLINE  │ CHATS ACTIVOS         │ Chat con: maria (🟢 online)       ║
║ 🔍[_______]   │                       │ ────────────────────────────────── ║
║ ─────────────  │ ▸ maria ✉(3) 🔴     │ [14:32] maria: ¿Vamos al cine?✅  ║
║🟢juan⌨️       │   carlos 👥✉(12)      │ [14:35] tú: ¡Perfecto! 📍        ║
║🟡ana (5min)   │   luis ✅             │ [14:36] maria: 😊                 ║
║🔴pedro        │   📌 familia 👥       │ maria está escribiendo... ⌨️       ║
║⚫sofia (1h)   │                       │                                   ║
║               │ [+] Nuevo chat        │ ┌───────────────────────────────┐ ║
║ ───────────── │                       │ │ Responder...                  │ ║
║ 👥 Grupos: 3  │                       │ └───────────────────────────────┘ ║
║ 🔒 Privados:4 │                       │ [Tab] Cambiar | [F1] Ayuda       ║
╚═══════════════╧═══════════════════════╧═══════════════════════════════════╝
